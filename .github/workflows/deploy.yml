name: Deploy React App to Server

on:
  push:
    branches:
      - master  # أو الفرع الرئيسي لديك

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # الخطوة 1: التحقق من المستودع
      - name: Checkout repository
        uses: actions/checkout@v3

      # الخطوة 2: إعداد Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'  # أو الإصدار المطلوب

      # الخطوة 3: تثبيت التبعيات باستخدام Yarn
      - name: Install dependencies
        run: yarn install

      # الخطوة 4: بناء المشروع
      - name: Build project
        run: yarn build

      # # الخطوة 5: إعداد مفتاح SSH
      # - name: Setup SSH
      #   uses: webfactory/ssh-agent@v0.5.4
      #   with:
      #     ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

      # # # الخطوة 6: نشر إلى الخادم باستخدام rsync
      # # - name: Deploy to Server via rsync
      # #   run: |
      # #     rsync -avz --delete --exclude='hawar.club' dist/ user@your.server.com:/home/hawar.club/public_html/
      # #   # استبدل 'user' و 'your.server.com' بمعلومات خادمك
